--====== Load Spawner ======--
local spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Utilities/main/Doors/Entity%20Spawner/V2/Source.lua"))()

--====== Hàm tạo và chạy Rebound ======--
local function GitAud(soundgit, filename)
	writefile(filename..".mp3", game:HttpGet(soundgit))
	return (getcustomasset or getsynasset)(filename..".mp3")
end

local function CustomGitSound(soundlink, vol, filename)
	local sound = Instance.new("Sound", workspace)
	sound.SoundId = GitAud(soundlink, filename)
	sound.Volume = vol or 1
	sound:Play()
end

local function createRebound()
	local entity = spawner.Create({
		Entity = {
			Name = "Rebound",
			Asset = "rbxassetid://13499570750",
			HeightOffset = 0
		},
		Lights = {
			Flicker = { Enabled = true, Duration = 1 },
			Shatter = true,
			Repair = false
		},
		Earthquake = { Enabled = true },
		CameraShake = {
			Enabled = true,
			Range = 100,
			Values = {1.5, 20, 0.1, 1}
		},
		Movement = {
			Speed = 230,
			Delay = 2,
			Reversed = true
		},
		Rebounding = {
			Enabled = true,
			Type = "Ambush",
			Min = 1,
			Max = 1,
			Delay = 0.01
		},
		Damage = {
			Enabled = true,
			Range = 40,
			Amount = 125
		},
		Crucifixion = {
			Enabled = true,
			Range = 40,
			Resist = false,
			Break = true
		},
		Death = {
			Type = "Guiding",
			Hints = {"Death", "Hints", "Go", "Here"},
			Cause = ""
		}
	})

	entity:SetCallback("OnSpawned", function()
		print("Rebound đã spawn!")

		-- Hiệu ứng màu
		local ReboundColor = Instance.new("ColorCorrectionEffect", game.Lighting)
		ReboundColor.Name = "Warn"
		ReboundColor.TintColor = Color3.fromRGB(61, 171, 98)
		ReboundColor.Saturation = -0.7
		ReboundColor.Contrast = 0.2
		game.Debris:AddItem(ReboundColor, 24)

		game.TweenService:Create(ReboundColor, TweenInfo.new(15), {
			TintColor = Color3.fromRGB(255, 255, 255),
			Saturation = 0,
			Contrast = 0
		}):Play()

		-- Camera shake
		local success, CameraShaker = pcall(function()
			return require(game.ReplicatedStorage:WaitForChild("CameraShaker"))
		end)

		if success then
			local cam = workspace.CurrentCamera
			local shaker = CameraShaker.new(Enum.RenderPriority.Camera.Value, function(shakeCf)
				cam.CFrame = cam.CFrame * shakeCf
			end)
			shaker:Start()
			shaker:ShakeOnce(10, 3, 0.1, 6, 2, 0.5)
		end

		-- Âm thanh
		CustomGitSound(
			"https://github.com/Kotyara19k-Doorsspawner/Random-files/raw/main/Y2meta.app%20-%20DOORS%20HARDCORE_REBOUND%20MOVING%20START%20(320%20kbps).mp3",
			2,
			"ReboundMoving"
		)
	end)

	return entity
end

--====== Lần spawn 1 ======--
local entity1 = createRebound()
entity1:Run()

--====== Chờ phòng mới rồi spawn 2 ======--
game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()
local entity2 = createRebound()
entity2:Run()

--====== Chờ phòng mới rồi spawn 3 ======--
game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()
local entity3 = createRebound()
entity3:Run()
